<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agenda Personal Interactiva</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <h1>Agenda Personal Interactiva</h1>

    <form id="taskForm">
      <label for="titulo">T√≠tulo:</label>
      <input type="text" id="titulo" required />

      <label for="descripcion">Descripci√≥n:</label>
      <textarea id="descripcion" required></textarea>

      <label for="fecha">Fecha:</label>
      <input type="date" id="fecha" required />

      <button type="submit">Agregar tarea</button>
    </form>

    <table id="tablaTareas">
      <thead>
        <tr>
          <th>T√≠tulo</th>
          <th>Descripci√≥n</th>
          <th>Fecha</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <script>
      const form = document.getElementById("taskForm");
      const tabla = document.querySelector("#tablaTareas tbody");

      function guardarTareas() {
        const filas = tabla.querySelectorAll("tr");
        const tareas = Array.from(filas).map((fila) => ({
          titulo: fila.cells[0].textContent,
          descripcion: fila.cells[1].textContent,
          fecha: fila.cells[2].textContent,
        }));
        localStorage.setItem("tareas", JSON.stringify(tareas));
      }

      function cargarTareas() {
        const tareas = JSON.parse(localStorage.getItem("tareas") || "[]");
        tareas.forEach((t) => agregarTarea(t.titulo, t.descripcion, t.fecha));
      }

      function agregarTarea(titulo, descripcion, fecha) {
        const fila = document.createElement("tr");

        const celdaTitulo = document.createElement("td");
        celdaTitulo.textContent = titulo;

        const celdaDescripcion = document.createElement("td");
        celdaDescripcion.textContent = descripcion;

        const celdaFecha = document.createElement("td");
        celdaFecha.textContent = fecha;

        const celdaAcciones = document.createElement("td");

        const btnEditar = document.createElement("button");
        btnEditar.textContent = "‚úèÔ∏è";
        btnEditar.style.background = "#ffc107";
        btnEditar.onclick = () => editarTarea(fila);

        const btnEliminar = document.createElement("button");
        btnEliminar.textContent = "üóëÔ∏è";
        btnEliminar.style.background = "#dc3545";
        btnEliminar.style.marginLeft = "5px";
        btnEliminar.onclick = () => eliminarTarea(fila);

        celdaAcciones.append(btnEditar, btnEliminar);
        fila.append(celdaTitulo, celdaDescripcion, celdaFecha, celdaAcciones);
        tabla.appendChild(fila);

        guardarTareas();
      }

      function editarTarea(fila) {
        const [titulo, descripcion, fecha] = fila.children;
        document.getElementById("titulo").value = titulo.textContent;
        document.getElementById("descripcion").value = descripcion.textContent;
        document.getElementById("fecha").value = fecha.textContent;
        fila.remove();
        guardarTareas();
      }

      function eliminarTarea(fila) {
        if (confirm("¬øDeseas eliminar esta tarea?")) {
          fila.remove();
          guardarTareas();
        }
      }

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        const titulo = document.getElementById("titulo").value.trim();
        const descripcion = document.getElementById("descripcion").value.trim();
        const fecha = document.getElementById("fecha").value;

        if (!titulo || !descripcion || !fecha) {
          alert("Por favor completa todos los campos.");
          return;
        }

        agregarTarea(titulo, descripcion, fecha);
        form.reset();
      });

      window.onload = cargarTareas;
    </script>
  </body>
</html>
